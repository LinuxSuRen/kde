apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{.ObjectMeta.Name}}
  namespace: {{.ObjectMeta.Namespace}}
  ownerReferences:
    - apiVersion: devops.ailink.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: GitPod
      name: {{.ObjectMeta.Name}}
      uid: {{.ObjectMeta.UID}}
spec:
  accessModes:
    - ReadWriteMany
  {{if .ObjectMeta.Annotations.storageClassName}}
  storageClassName: {{ .ObjectMeta.Annotations.storageClassName }}
  {{end}}
  {{if .ObjectMeta.Annotations.volumeMode}}
  volumeMode: {{ .ObjectMeta.Annotations.volumeMode }}
  {{end}}
  resources:
    requests:
      storage: {{.Spec.Storage}}
